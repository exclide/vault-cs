### Основные компоненты ОС:
Планировщик задач  
Управление памятью  
Межпроцессное взаимодействие  
Файловая система  

![OS stack](data/os_stack.png)

### Основные абстракции ОС
Процессы и потоки  
Файлы и файловые системы  
Адресное пространство и память  
Сокеты, протоколы, устройства


### Общие определения
Обработчики прерываний - расположены в начале памяти, выполняются при вызове прерывания, должны сохранять контекст приложения (текущие регистры процессора)

Аппаратные прерывания - прерывания ввода/вывода различных девайсов  
Программные прерывания - ассемблерная инструкция int xxx

Виртуальное адресное пространство - изоляция памяти различных приложений. Начало всегда с нуля и оффсеты памяти от начала.

![](data/memory_model.jpg)

Системный вызов - вызов функции интерфейса ОС. Требует прерывания, смены контекста. User-space прерывание

Создание процессов - изначально существует один процесс. Далее строим дерево процессов fork() -> exec(), т.е. клонируем процесс, загружаем из файла данные и заменяем содержимое клона.

Файл - универсальный системный интерфейс доступа к устройству. Файловый интерфейс: open, close, read, write, ioctl. Open - открывает файл (создает файловый дескриптор), можно открыть любой объект, поддерживающий файловый интерфейс. Может быть файл на диске, оперативная память, сокет, устройство. 

### Включил компьютер, что происходит
Когда питание подается на процессор, он начинает исполнять инструкции с фиксированного адреса - сначала POST (power off self-test), далее BIOS (basic input-output system). Далее BIOS ищет первое устройство, с которого можно загрузиться. Там должен быть загрузчик операционной системы. Далее перед созданием первого пользовательского процесса, запускается таймер прерывания - по истечении таймера, вызывает обработчик прерываний - в данным случае планировщик задач.

Квант - время таймера прерываний, каждый квант в ОС по истечении таймера вызывается обработчик прерываний - планировщик задач, который решает какому процессу далее передать управление. Таким образом реализуется многозадачность.

Планировщик - упрощенно обраотчик прерываний таймера.

### Адреса
Логический - модель адресации памяти intel, обычно для 32-битных систем. Адрес вида (segment selector : offset). Вместо исползуют paging и линейные адреса.

Линейный - виртуальный адрес, пространство процессора от 0 до 2^разрядности системы. Каждый такой адрес разбивается на страницы размера 4кб, которые в дальнейшем мапятся на page физического адреса с помощью таблицы виртуальных адресов (page table).

Физический - адрес памяти по конкретной шине

