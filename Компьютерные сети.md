Модель OSI, уровни. Фазан купил сосику теперь сосет пиписку
Все семь уровней можно разделить на две группы:
Media layers (уровни среды) - L1, L2, L3 отвечают за передачу информации по кабелю или беспроводной сети. Используются сетевыми устройствами: коммутаторы, маршрутизаторы и т.п.
Host layers (уровни хоста) - L4, L5, L6, L7 - используются непосредственно на пользовательских устройствах, то есть компьютерах.
L4 (транспортный) - посредник между host и media layers.

## L1. Физический - уровень физической передачи данных и протоколов для этого. 
Оптоволокно, медный проводник, радиоволны, сигнали кодируют биты, репитеры, хабы (концетраторы), усилители, разъемы.

Передаются подписанные пакеты в виде кадров (frames). Пакет - заголовок и полезные данные (payload). В заголовке - MAC destination/source, контрольная сумма, размера фрейма
## L2. Канальный (link) - протокол ethernet, коммутаторы (свитчи), мосты (бриджи), вводится адресация (MAC-address устройства), передача подписанных пакетов
Ethernet - описание как биты кодируются в сигналы, описание пакетов на канальном уровне, адресация
Коммутаторы имеют таблицу MAC-адресов, изначально пустая, заполнятная постепенно по мере передачи фреймов, первые передачи - броадкаст всем узлам (броадкаст - запрос на узел с адресом .255.255)
## L3. Сетевой - IPv4, IPv6 - публичная адресация (за пределами локальной сети), вопросы маршрутизации
Протоколы ARP/RARP - связь адресов сетевого уровня с канальным IP-MAC. ARP-запрос - броадкаст в сеть - "у кого IP адрес X - скажи мне свой MAC". ARP-кэш - мапа IPv4->MAC

IPv4 - 4 октета, 32 бита, всего около 4 млрд различных адресов, т.е. не хватает всем. Решение - публичный адрес один на одного провайдера, из адресов локальной сети провайдера пакеты передаются на шлюз (default gateway - узел в локальной сети, подключенный к внешней сети), тот используя порт мапит данный запрос на локальный IP-адрес, и подменяет при запросе на конечный узел адрес локального компьютера на свой - когда получает ответ, идет в мапу и делает обратную замену.

Протоколы RIP, EGRP - протоколы оптимальный маршрутизации, используют хопы в качестве метрики для нахождения наиболее короткого маршрута.
## L4. Транспортный - TCP/UDP - основные протоколы передачи данных, добавляется адресация в виде портов.
Порт - идентификатор приложения/процесса на узле
Сокет - IP:Port
UDP - датаграмная передача пакетов, без установки сессии/соединения и подтверждения получения. 
TCP - установка сессии/соединения через 3-way рукопожатие, подтверждение получения пакетов, повторная передачи в случае потери, гарантирует целостность данных в отличие от UDP. Если размер пакета превышает пропускную способность сети, пакет делится на сегменты.
## L5. Сессионный - отвечает за поддержку сеанса или сессии связи. 
## L6. Представления - отвечает за преобразования протоколов и кодирование/декодирование данных, а также шифрованием данных. 
## L7. Приложений - взаимодействия приложений с сетью, протоколы http, ftp, smtp, dns

Уровни TCP/IP
1. Канальный - адреса MAC, протоколы Ethernet, IEEE 802.x
2. Сетевой - адреса IP, протоколы трансляции адресов IP<->MAC  - ARP, RARP (address resolution protocol), протоколы маршрутизаторов - ICMP, IGMP 
3. Транспортный - адреса Socket - IP:port, протоколы передачи данных TCP/UDP. UDP - датаграмная передача пакетов, без установки сессии/соединения и подтверждения получения. TCP - установка сессии/соединения через 3-way рукопожатие, подтверждение получения пакетов. 
4. Приложений - адреса Domain name, протоколы приложений http, ftp, dns, smtp